(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();let m;function L(){if(m!==void 0)return m;const t=document.createElement("div");return Object.assign(t.style,{position:"absolute",inset:"-200px",width:"100px",height:"100px",overflow:"scroll"}),document.body.appendChild(t),m=t.offsetWidth-t.clientWidth,document.body.removeChild(t),m}let g=!1;function x(){g||(document.documentElement.style.setProperty("--scrollbar-width",`${L()}px`),g=!0)}function S(){x(),document.documentElement.classList.add("modal-open")}function _(){document.documentElement.classList.remove("modal-open")}const w=document.querySelectorAll(".photo");w.forEach(t=>{t.addEventListener("click",()=>{P(t)})});function q(t){const e=document.createElement("div");return e.innerHTML=t,e.firstElementChild}async function I(t){const e=`
    <dialog class="lightbox">
      <img class="lightbox__photo photo" src="${t.src}" >
      <p class="lightbox__text invisible">example text</p>
    </dialog>`,s=q(e),r=s.querySelector(".lightbox__photo");return new Promise(n=>{r.addEventListener("load",()=>{n(s)}),r.addEventListener("error",o=>{throw new Error("img not loaded. Skipping "+t.src)})})}async function P(t){S();const e=await I(t),s=e.querySelector(".lightbox__photo"),r=e.querySelector(".lightbox__text");e.addEventListener("click",l=>{l.target.nodeName!=="P"&&y()}),e.addEventListener("cancel",l=>{l.preventDefault(),y()}),document.body.appendChild(e),e.showModal(),e.classList.add("is-open"),t.style.visibility="hidden";const n=t.getBoundingClientRect(),o=s.getBoundingClientRect(),i=n.height/o.height,c=n.width/o.width,a=n.y-o.y,h=n.x-o.x,d={easing:"ease",duration:400},u=`translateY(${a}px) translateX(${h}px) scale(${c}, ${i})`,p="translate(0, 0) scale(1) ",E=s.animate({transform:[u,p]},d);r.classList.remove("invisible");async function y(){var l;E.cancel(),r.classList.add("invisible"),s.style.borderWidth=`${10/i}px`,e.classList.remove("is-open"),await s.animate({transform:[p,u]},d).finished,t.style.visibility="",e.close(),(l=e.parentElement)==null||l.removeChild(e),_()}}const $=document.querySelectorAll(".player");$.forEach(t=>{const e=t.querySelector(".player__video"),s=t.querySelector(".player__button"),r=t.querySelector(".player__overlay");function n(){r&&(r.style.display="none"),s.textContent="Pause ⏸"}function o(){s.textContent="Play ⏵"}function i(){r&&(r.style.display=""),s.textContent="Replay ⏮"}function c(){e.paused?e.play():e.pause()}s.addEventListener("click",c),e.addEventListener("click",a=>{a.preventDefault(),c()}),e.addEventListener("play",n),e.addEventListener("pause",o),e.addEventListener("ended",i),o()});const f=document.getElementById("toc");function v(t){if(t){if(t.nodeName!=="A"){const e=t.parentElement,s=e==null?void 0:e.id;t=document.querySelector(`[data-to="${s}"]`)}f.querySelectorAll(".is-selected").forEach(e=>e.classList.remove("is-selected")),t.classList.add("is-selected")}}function A(){const t=[];document.querySelectorAll("main section[id]").forEach(e=>{const s=e.id,r=e.querySelector("h1,h2,h3,h4");if(!r)return;const n=r.dataset.alt||r.textContent,o=["toc__entry"];(r.nodeName==="H2"||r.nodeName==="H1")&&o.push("toc__entry--group"),t.push(`<li><a class="${o.join(" ")}" data-to="${s}" href="#${s}">
        <span>${n}</span>
        </a></li>`)}),f.innerHTML=t.join(""),f.addEventListener("click",e=>{const s=e.target;if(s.nodeName!=="A")return;e.preventDefault();const r=s.dataset.to==="me"?"center":"start",n=document.getElementById(s.dataset.to);n==null||n.scrollIntoView({behavior:"smooth",block:r}),setTimeout(()=>document.body.classList.remove("nav-open"),500)})}function C(){function t(o,i){o.forEach(c=>{if(c.isIntersecting){const d=c.target.parentElement.id,u=document.querySelector(`[data-to="${d}"]`);v(u)}})}const e=new IntersectionObserver(t,{root:null,rootMargin:"0px 0px -75% 0px",threshold:0}),r=Array.from(document.querySelectorAll("section[id]")).map(o=>o.querySelector("h1,h2,h3")),n=document.documentElement.scrollTop;for(const o of r.reverse())if(o.offsetTop<n){v(o);break}r.forEach(o=>{e.observe(o)})}A();C();const b=document.getElementById("hamburger");function O(){document.body.classList.toggle("nav-open")}function T(){document.body.classList.remove("nav-open")}b.addEventListener("click",O);b.addEventListener("keydown",t=>{t.key==="Escape"&&T()});
