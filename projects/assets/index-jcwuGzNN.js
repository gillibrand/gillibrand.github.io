(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();let m;function _(){if(m!==void 0)return m;const t=document.createElement("div");return Object.assign(t.style,{position:"absolute",inset:"-200px",width:"100px",height:"100px",overflow:"scroll"}),document.body.appendChild(t),m=t.offsetWidth-t.clientWidth,document.body.removeChild(t),m}let L=!1;function q(){L||(document.documentElement.style.setProperty("--scrollbar-width",`${_()}px`),L=!0)}function I(){q(),document.documentElement.classList.add("modal-open")}function $(){document.documentElement.classList.remove("modal-open")}const P=document.querySelectorAll(".photo");P.forEach(t=>{t.addEventListener("click",()=>{A(t)})});function C(t){const e=document.createElement("div");return e.innerHTML=t,e.firstElementChild}async function O(t){const e=t.closest("figure"),s=e==null?void 0:e.querySelector("figcaption"),r=`
    <dialog class="lightbox">
      <img class="lightbox__photo photo" src="${t.currentSrc}" >
      <p class="lightbox__text opacity-0">${(s==null?void 0:s.textContent)||""}</p>
    </dialog>`,o=C(r),n=o.querySelector(".lightbox__photo");return new Promise(i=>{n.addEventListener("load",()=>{i(o)}),n.addEventListener("error",c=>{throw new Error("img not loaded. Skipping "+t.currentSrc)})})}async function A(t){I();const e=await O(t),s=e.querySelector(".lightbox__photo"),r=e.querySelector(".lightbox__text");e.addEventListener("click",a=>{a.target.nodeName!=="P"&&E()}),e.addEventListener("cancel",a=>{a.preventDefault(),E()}),document.body.appendChild(e),e.showModal(),setTimeout(()=>e.classList.add("is-open")),t.style.visibility="hidden";const o=t.getBoundingClientRect(),n=s.getBoundingClientRect(),i=o.height/n.height,c=o.width/n.width,l=o.y-n.y,v=o.x-n.x,d={easing:"ease",duration:400},u=`translateY(${l}px) translateX(${v}px) scale(${c}, ${i})`,b="translate(0, 0) scale(1) ",w=s.animate({transform:[u,b]},d);r.classList.remove("opacity-0");async function E(){var a;w.cancel(),r.classList.add("opacity-0"),s.style.borderWidth=`${10/i}px`,e.classList.remove("is-open"),await s.animate({transform:[b,u]},d).finished,t.style.visibility="",e.close(),(a=e.parentElement)==null||a.removeChild(e),$()}}const N=document.querySelectorAll(".vidplayer");N.forEach(t=>{const e=t.querySelector(".vidplayer__video"),s=t.querySelector(".vidplayer__button"),r=t.querySelector(".vidplayer__overlay");function o(){r&&(r.style.display="none"),s.textContent="Pause ⏸"}function n(){s.textContent="Play ⏵"}function i(){r&&(r.style.display=""),s.textContent="Replay ⏮"}function c(){e.paused?e.play():e.pause()}s.addEventListener("click",c),e.addEventListener("click",l=>{l.preventDefault(),c()}),e.addEventListener("play",o),e.addEventListener("pause",n),e.addEventListener("ended",i),n()});const k=document.getElementById("hamburger"),S=document.getElementById("sidebar"),h=document.getElementById("navunderlay");function g(){return document.body.classList.contains("nav-open")}function T(){g()?p():M()}const f={easing:"ease",duration:200};function M(){g()||(document.body.classList.add("nav-open"),S.animate({transform:["translateX(-100%)","translateX(0)"]},f),h.animate({opacity:["0","1"]},f))}async function p(){if(!g())return;const t=S.animate({transform:["translateX(0)","translateX(-100%)"]},f);h.animate({opacity:["1","0"]},f),await t.finished,document.body.classList.remove("nav-open")}k.addEventListener("click",T);document.body.addEventListener("keydown",t=>{t.key==="Escape"&&p()});h.addEventListener("click",p);const y=document.getElementById("navmenu");function x(t){if(t){if(t.nodeName!=="A"){const e=t.parentElement,s=e==null?void 0:e.id;t=document.querySelector(`[data-to="${s}"]`)}y.querySelectorAll(".is-selected").forEach(e=>e.classList.remove("is-selected")),t.classList.add("is-selected")}}function B(){const t=[];document.querySelectorAll("main section[id]").forEach(e=>{const s=e.id,r=e.querySelector("h1,h2,h3,h4");if(!r)return;const o=r.dataset.alt||r.textContent,n=["navmenu__entry"];(r.nodeName==="H2"||r.nodeName==="H1")&&n.push("navmenu__entry--group"),t.push(`<li><a class="${n.join(" ")}" data-to="${s}" href="#${s}">
        <span>${o}</span>
        </a></li>`)}),y.innerHTML=t.join(""),y.addEventListener("click",e=>{const s=e.target;if(s.nodeName!=="A")return;e.preventDefault();const r=s.dataset.to==="me"?"center":"start",o=document.getElementById(s.dataset.to);o==null||o.scrollIntoView({behavior:"smooth",block:r}),p()})}function W(){function t(n,i){n.forEach(c=>{if(c.isIntersecting){const d=c.target.parentElement.id,u=document.querySelector(`[data-to="${d}"]`);x(u)}})}const e=new IntersectionObserver(t,{root:null,rootMargin:"0px 0px -75% 0px",threshold:0}),r=Array.from(document.querySelectorAll("section[id]")).map(n=>n.querySelector("h1,h2,h3")),o=document.documentElement.scrollTop;for(const n of r.reverse())if(n.offsetTop<o){x(n);break}r.forEach(n=>{e.observe(n)})}B();W();
